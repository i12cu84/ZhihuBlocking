# ZhihuBlocking

知乎内容自定义屏蔽词过滤器

配置环境: 浏览器插件Tampermokey(油猴)启用该脚本即自动生效




更新日志

初始版本 (v1.0)

基本功能：在知乎首页屏蔽包含特定关键词的问题

关键词列表硬编码在脚本中

使用MutationObserver监听动态加载的内容

简单直接的内容过滤功能

v1.1 版本更新

功能优化

-> 屏蔽词管理面板

在页面左下角添加了可交互的控制面板

支持实时添加和删除屏蔽词

所有更改立即生效并保存

->持久化存储

使用Tampermonkey的GM_setValue/GM_getValue API

用户自定义的屏蔽词在页面刷新后仍然保留

默认关键词列表作为初始值

->复制功能

添加"复制所有屏蔽词"按钮

一键将当前屏蔽词列表复制到剪贴板

JSON格式输出，便于直接粘贴到脚本代码中

->用户体验改进

添加操作反馈通知

更直观的界面设计

支持Enter键快速添加关键词

->代码结构优化

模块化函数设计，提高可维护性

更清晰的代码组织结构

添加了菜单命令支持

v1.2 版本更新

界面优化

-> 控制面板位置调整

从页面左下角改为右下角，避免遮挡知乎原生UI

通知消息也相应调整到右下角显示

功能增强

-> 防抖处理

添加debounce函数，减少高频DOM操作带来的性能开销

优化MutationObserver回调逻辑

-> 导入功能

添加屏蔽词导入功能，支持JSON文件导入

方便用户批量添加屏蔽词或迁移设置

-> 拖拽功能

控制面板支持拖拽，用户可以自由调整位置

提升使用便利性

-> 统计信息

实时显示屏蔽统计：已屏蔽问题数量/总问题数量

显示当前屏蔽词总数

v1.3 版本更新 - 性能优化

性能优化

-> 元素处理缓存

使用WeakSet缓存已处理的DOM元素，避免重复处理

减少不必要的DOM操作

-> 改进的选择器

使用更精确的选择器匹配知乎问题容器

减少不必要的元素匹配

-> 分批处理

使用requestAnimationFrame分批处理DOM元素

避免一次性处理大量元素导致的页面卡顿

-> 优化的MutationObserver

简化MutationObserver逻辑，减少回调复杂度

只处理真正新增的节点

-> 延迟初始化

控制面板创建和内容处理延迟执行

避免影响页面初始加载速度

-> 改进的防抖函数

修复防抖函数实现，避免潜在的性能问题

调整防抖时间到更合理的300ms

-> 减少DOM查询

优化统计信息更新逻辑，减少DOM查询频率

问题修复

-> 修复可能导致页面加载缓慢的问题

-> 修复可能的内存泄漏问题

-> 提高脚本稳定性

v1.4 版本更新 - 内容控制增强

新功能

-> 重新扫描功能

添加新屏蔽词后，会自动重新扫描所有内容

包括之前未被屏蔽但现在匹配新关键词的内容

确保新添加的屏蔽词立即生效

-> 显示/隐藏控制

添加"显示所有内容"按钮

一键显示所有被屏蔽的内容，方便查看

添加"重新应用屏蔽"按钮

一键重新隐藏所有匹配屏蔽词的内容

-> 状态反馈

按钮点击后有视觉反馈，显示操作状态

临时改变按钮文本和颜色，提示用户操作成功

-> 数据标记

为被屏蔽的元素添加data-zhihu-blocked属性

便于区分哪些内容是被脚本屏蔽的

界面优化

-> 增加面板宽度以适应更多按钮

-> 优化按钮布局，分为两行排列

-> 更直观的按钮颜色编码

性能改进

-> 优化重新扫描逻辑，避免不必要的DOM操作

-> 改进缓存清除机制，确保重新扫描的准确性

v1.5 版本更新 - 视觉提示增强

视觉优化

-> 高亮显示被屏蔽内容

当点击"显示所有内容"时，原本被屏蔽的内容会高亮显示

添加红色左侧边框和浅红色背景

-> 简化样式

移除复杂的标签和标题颜色变化

只保留红色背景和边框标记

功能改进

-> 更清晰的状态指示

用户可以一目了然地看到哪些内容原本是被屏蔽的

-> 改进的通知信息

更新通知内容，明确提示高亮功能

v1.6 版本更新 - 功能修复

问题修复

-> 修复"显示所有内容"按钮失效问题

重新设计显示/隐藏逻辑，确保按钮功能正常

改进元素选择和操作方式

-> 修复面板重复创建问题

检查并移除已存在的面板，避免重复创建

-> 改进错误处理

添加更多空值检查，防止脚本崩溃

-> 优化通知系统

为通知添加唯一ID，避免重复通知

功能优化

-> 改进元素选择器

使用更全面的选择器匹配知乎内容

-> 增强调试信息

添加更多console.log输出，便于问题诊断

-> 优化初始化时机

调整延迟时间，确保页面完全加载

-> 改进菜单命令

添加面板不存在时的创建逻辑

稳定性提升

-> 提高脚本在各种网络条件下的稳定性

-> 优化内存使用，减少资源占用

-> 改进与知乎页面的兼容性